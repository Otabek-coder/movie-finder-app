{"ast":null,"code":"import _slicedToArray from \"/Users/HomeFolder/Downloads/otabek-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/HomeFolder/Downloads/otabek-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"/Users/HomeFolder/Downloads/otabek-assignment/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _templateObject,\n    _jsxFileName = \"/Users/HomeFolder/Downloads/otabek-assignment/src/App.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport CardList from \"./components/CardList\";\nimport styled from \"styled-components\";\nimport Filter from \"./components/filter/Filter\";\nimport Footer from \"./components/Footer\";\nimport data1 from \"./data/data1.json\";\nimport data2 from \"./data/data2.json\";\nimport data3 from \"./data/data3.json\";\nimport data4 from \"./data/data4.json\";\nimport data5 from \"./data/data5.json\";\nvar allMovies = [].concat(_toConsumableArray(data1.results), _toConsumableArray(data2.results), _toConsumableArray(data3.results), _toConsumableArray(data4.results), _toConsumableArray(data5.results));\nvar Wrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  margin: 0em 2em;\\n  position: relative;\\n\"])));\nexport var ITEMS_PERPAGE_DEFAULT = 10;\nexport var paginationOptions = [5, ITEMS_PERPAGE_DEFAULT, 15, 20];\n\nfunction App() {\n  var _useState = useState(allMovies),\n      _useState2 = _slicedToArray(_useState, 2),\n      filteredMovies = _useState2[0],\n      setFilteredMovies = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      currentPageMovies = _useState4[0],\n      setCurrentPageMovies = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentPage = _useState6[0],\n      setCurrentPage = _useState6[1];\n\n  var _useState7 = useState(ITEMS_PERPAGE_DEFAULT),\n      _useState8 = _slicedToArray(_useState7, 2),\n      itemsPerPage = _useState8[0],\n      setItemsPerPage = _useState8[1];\n\n  var moviesLength = filteredMovies.length;\n  var totalPages = Math.ceil(moviesLength / itemsPerPage);\n  useEffect(function () {\n    setCurrentPage(1);\n  }, [itemsPerPage]);\n  useEffect(function () {\n    var trimStart = (currentPage - 1) * itemsPerPage;\n    var trimEnd = trimStart + itemsPerPage;\n    var pageMovies = filteredMovies.slice(trimStart, trimEnd);\n    setCurrentPageMovies(pageMovies);\n  }, [currentPage, itemsPerPage, filteredMovies]);\n\n  var onPrev = function onPrev() {\n    return setCurrentPage(function (prev) {\n      return prev - 1;\n    });\n  };\n\n  var onNext = function onNext() {\n    return setCurrentPage(function (prev) {\n      return prev + 1;\n    });\n  };\n\n  var onSelect = function onSelect(itemsPerPageNew) {\n    setItemsPerPage(itemsPerPageNew);\n  };\n\n  var onFilterChange = function onFilterChange(_ref) {\n    var search = _ref.search,\n        releasedYear = _ref.releasedYear,\n        language = _ref.language,\n        mediaType = _ref.mediaType;\n\n    var movies = _toConsumableArray(allMovies);\n\n    if (search) {\n      movies = movies.filter(function (movie) {\n        return String(movie.title).toLowerCase().includes(search.toLowerCase());\n      });\n    }\n\n    if (language) {\n      movies = movies.filter(function (movie) {\n        return movie.original_language === language;\n      });\n    }\n\n    if (releasedYear) {\n      movies = movies.filter(function (movie) {\n        var year = movie.released_date.split(\"-\")[0];\n        return year <= releasedYear;\n      });\n    }\n\n    if (mediaType) {\n      movies = movies.filter(function (movie) {\n        return movie.media_type === mediaType;\n      });\n    }\n\n    setFilteredMovies(movies);\n  };\n\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Filter, {\n    itemsPerPage: itemsPerPage,\n    onSelect: onSelect,\n    onFilterChange: onFilterChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardList, {\n    movies: currentPageMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Footer, {\n    onPrev: onPrev,\n    onNext: onNext,\n    currentPage: currentPage,\n    totalPages: totalPages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/HomeFolder/Downloads/otabek-assignment/src/App.js"],"names":["React","useEffect","useState","CardList","styled","Filter","Footer","data1","data2","data3","data4","data5","allMovies","results","Wrapper","div","ITEMS_PERPAGE_DEFAULT","paginationOptions","App","filteredMovies","setFilteredMovies","currentPageMovies","setCurrentPageMovies","currentPage","setCurrentPage","itemsPerPage","setItemsPerPage","moviesLength","length","totalPages","Math","ceil","trimStart","trimEnd","pageMovies","slice","onPrev","prev","onNext","onSelect","itemsPerPageNew","onFilterChange","search","releasedYear","language","mediaType","movies","filter","movie","String","title","toLowerCase","includes","original_language","year","released_date","split","media_type"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport CardList from \"./components/CardList\";\nimport styled from \"styled-components\";\nimport Filter from \"./components/filter/Filter\";\nimport Footer from \"./components/Footer\";\n\nimport data1 from \"./data/data1.json\";\nimport data2 from \"./data/data2.json\";\nimport data3 from \"./data/data3.json\";\nimport data4 from \"./data/data4.json\";\nimport data5 from \"./data/data5.json\";\n\nconst allMovies = [\n  ...data1.results,\n  ...data2.results,\n  ...data3.results,\n  ...data4.results,\n  ...data5.results,\n];\n\nconst Wrapper = styled.div`\n  margin: 0em 2em;\n  position: relative;\n`;\n\nexport const ITEMS_PERPAGE_DEFAULT = 10;\nexport const paginationOptions = [5, ITEMS_PERPAGE_DEFAULT, 15, 20];\n\nfunction App() {\n  const [filteredMovies, setFilteredMovies] = useState(allMovies);\n  const [currentPageMovies, setCurrentPageMovies] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(ITEMS_PERPAGE_DEFAULT);\n\n  const moviesLength = filteredMovies.length;\n  const totalPages = Math.ceil(moviesLength / itemsPerPage);\n\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [itemsPerPage]);\n\n  useEffect(() => {\n    const trimStart = (currentPage - 1) * itemsPerPage;\n    const trimEnd = trimStart + itemsPerPage;\n\n    const pageMovies = filteredMovies.slice(trimStart, trimEnd);\n    setCurrentPageMovies(pageMovies);\n  }, [currentPage, itemsPerPage, filteredMovies]);\n\n  const onPrev = () => setCurrentPage((prev) => prev - 1);\n\n  const onNext = () => setCurrentPage((prev) => prev + 1);\n\n  const onSelect = (itemsPerPageNew) => {\n    setItemsPerPage(itemsPerPageNew);\n  };\n\n  const onFilterChange = ({ search, releasedYear, language, mediaType }) => {\n    let movies = [...allMovies];\n    if (search) {\n      movies = movies.filter((movie) =>\n        String(movie.title)\n          .toLowerCase()\n          .includes(search.toLowerCase())\n      );\n    }\n    if (language) {\n      movies = movies.filter((movie) => movie.original_language === language);\n    }\n    if (releasedYear) {\n      movies = movies.filter((movie) => {\n        const  year = movie.released_date.split(\"-\")[0];\n        return year <= releasedYear;\n      });\n    }\n    if (mediaType) {\n      movies = movies.filter((movie) => movie.media_type === mediaType);\n    }\n    setFilteredMovies(movies);\n  };\n  return (\n    <Wrapper>\n      <Filter\n        itemsPerPage={itemsPerPage}\n        onSelect={onSelect}\n        onFilterChange={onFilterChange}\n      />\n      <CardList movies={currentPageMovies} />\n      <Footer\n        onPrev={onPrev}\n        onNext={onNext}\n        currentPage={currentPage}\n        totalPages={totalPages}\n      />\n    </Wrapper>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}